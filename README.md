# never-ending-stream

Automatically restarts your stream for you when it ends

## Usage

```js
var nes = require('never-ending-stream')
var from = require('from2')
var through = require('through2')
var assert = require('assert')
var chunks = [new Buffer('hello'), new Buffer('world')]
var count = 0
var stream = nes(function(cb) {
  var source = [].concat(chunks)
  var orig = from.obj(function(size, next) {
    next(null, source.shift())
  })
  return orig
})
var expected  = [].concat(chunks).concat(chunks)

stream.pipe(through.obj(function (chunk, enc, cb) {
  if (expected.length === 0)
    return stream.destroy() // stops the stream!

  cb()
}))
```

## API

### neverEndingStream([opts,] build([cb]))

Creates a binary never-ending stream, by concatenating all streams
generated by `build`. `build` is called whenever the
previous stream completes.

`build` can be synchronous or asynchronous:

* if it accepts no callback, is synchronous, and it should return the
  stream, or `null` to close the `never-ending-stream`.

* if it accepts a callback, is asynchronous, and you should call the
  callback when the next stream is ready, like `cb(null, stream)`.

All other options will be passed to [through2](http://npm.im/through2).

### neverEndingStream.obj([opts, ], build([cb]))

Like `neverEndingStream()`, but with `objectMode: true` by default.

## License

MIT
